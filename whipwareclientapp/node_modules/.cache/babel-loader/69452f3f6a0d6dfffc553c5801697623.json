{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  _setPrototypeOf(subClass.prototype, superClass && superClass.prototype);\n\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) {\n    return o.__proto__;\n  };\n\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar style = {\n  position: 'absolute',\n  left: 0,\n  top: 0,\n  right: 0,\n  bottom: 0,\n  overflow: 'hidden',\n  zIndex: -1,\n  visibility: 'hidden',\n  pointerEvents: 'none'\n};\nvar styleChild = {\n  position: 'absolute',\n  left: 0,\n  top: 0,\n  transition: '0s'\n};\n\nfunction isAncestor(node, ancestor) {\n  var current = node.parentNode;\n\n  while (current) {\n    if (current === ancestor) {\n      return true;\n    }\n\n    current = current.parentNode;\n  }\n\n  return false;\n}\n\nvar ResizeObserver =\n/*#__PURE__*/\nfunction (_React$Component) {\n  function ResizeObserver() {\n    var _getPrototypeOf2;\n\n    var _temp, _this;\n\n    _classCallCheck(this, ResizeObserver);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _possibleConstructorReturn(_this, (_temp = _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ResizeObserver)).call.apply(_getPrototypeOf2, [this].concat(args))), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_expandRef\", null), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_shrinkRef\", null), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_node\", null), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_lastWidth\", void 0), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_lastHeight\", void 0), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_lastRect\", void 0), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_hasResize\", false), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_handleScroll\", function (event) {\n      if ((_this.props.onPosition || _this.props.onReflow || _this.props.onResize) && (_this._globalScollTarget(event.target) || _this._refScrollTarget(event.target) || _this._ancestorScollTarget(event.target))) {\n        _this._reflow();\n      }\n    }), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_globalScollTarget\", function (target) {\n      return target instanceof Node && (_this.props.onPosition || _this.props.onReflow) && (target === document || target === document.documentElement || target === document.body);\n    }), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_refScrollTarget\", function (target) {\n      if (target instanceof HTMLElement && (target === _this._expandRef || target === _this._shrinkRef)) {\n        var width = target.offsetWidth;\n        var height = target.offsetHeight;\n\n        if (width !== _this._lastWidth || height !== _this._lastHeight) {\n          _this._lastWidth = width;\n          _this._lastHeight = height;\n\n          _this._reset(_this._expandRef);\n\n          _this._reset(_this._shrinkRef);\n\n          return true;\n        }\n      }\n\n      return false;\n    }), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_ancestorScollTarget\", function (target) {\n      return target instanceof Node && (_this.props.onPosition || _this.props.onReflow) && _this._node && isAncestor(_this._node, target);\n    }), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_reflow\", function () {\n      if (!_this._node || !(_this._node.parentNode instanceof Element)) return;\n\n      var rect = _this._node.parentNode.getBoundingClientRect();\n\n      var sizeChanged = true;\n      var positionChanged = true;\n\n      if (_this._lastRect) {\n        sizeChanged = rect.width !== _this._lastRect.width || rect.height !== _this._lastRect.height;\n        positionChanged = rect.top !== _this._lastRect.top || rect.left !== _this._lastRect.left;\n      }\n\n      _this._lastRect = rect;\n\n      if (sizeChanged && _this.props.onResize) {\n        _this.props.onResize(rect);\n      }\n\n      if (positionChanged && _this.props.onPosition) {\n        _this.props.onPosition(rect);\n      }\n\n      if ((sizeChanged || positionChanged) && _this.props.onReflow) {\n        _this.props.onReflow(rect);\n      }\n    }), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_handleRef\", function (node) {\n      _this._node = node;\n    }), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_handleExpandRef\", function (node) {\n      _this._reset(node);\n\n      _this._expandRef = node;\n    }), _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_handleShrinkRef\", function (node) {\n      _this._reset(node);\n\n      _this._shrinkRef = node;\n    }), _temp));\n  }\n\n  _createClass(ResizeObserver, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._reflow();\n\n      window.addEventListener('scroll', this._handleScroll, true);\n\n      if (this.props.onPosition || this.props.onReflow) {\n        window.addEventListener('resize', this._reflow, true);\n        this._hasResize = true;\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if ((this.props.onPosition || this.props.onReflow) && !this._hasResize) {\n        window.addEventListener('resize', this._reflow, true);\n        this._hasResize = true;\n      } else if (!(this.props.onPosition || this.props.onReflow) && this._hasResize) {\n        window.removeEventListener('resize', this._reflow, true);\n        this._hasResize = false;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('scroll', this._handleScroll, true);\n\n      if (this._hasResize) {\n        window.removeEventListener('resize', this._reflow, true);\n      }\n    }\n  }, {\n    key: \"_reset\",\n    value: function _reset(node) {\n      if (node) {\n        node.scrollLeft = 100000;\n        node.scrollTop = 100000;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.onResize || this.props.onReflow) {\n        return _react.default.createElement(\"div\", {\n          style: style,\n          ref: this._handleRef\n        }, _react.default.createElement(\"div\", {\n          ref: this._handleExpandRef,\n          style: style\n        }, _react.default.createElement(\"div\", {\n          style: _objectSpread({}, styleChild, {\n            width: 100000,\n            height: 100000\n          })\n        })), _react.default.createElement(\"div\", {\n          ref: this._handleShrinkRef,\n          style: style\n        }, _react.default.createElement(\"div\", {\n          style: _objectSpread({}, styleChild, {\n            width: '200%',\n            height: '200%'\n          })\n        })));\n      }\n\n      return _react.default.createElement(\"noscript\", {\n        ref: this._handleRef\n      });\n    }\n  }]);\n\n  _inherits(ResizeObserver, _React$Component);\n\n  return ResizeObserver;\n}(_react.default.Component);\n\n_defineProperty(ResizeObserver, \"displayName\", 'ResizeObserver');\n\nvar _default = ResizeObserver;\nexports.default = _default;","map":{"version":3,"sources":["../src/ResizeObserver.js"],"names":["style","position","left","top","right","bottom","overflow","zIndex","visibility","pointerEvents","styleChild","transition","current","node","ResizeObserver","React","Component","window","event","target","document","width","height","isAncestor","rect","sizeChanged","positionChanged","_handleRef"],"mappings":"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","sourcesContent":["// @flow\n/* eslint-disable complexity */\n\n// =============================================================================\n// Import modules.\n// =============================================================================\nimport React from 'react';\n\nconst style = {\n  position: 'absolute',\n  left: 0,\n  top: 0,\n  right: 0,\n  bottom: 0,\n  overflow: 'hidden',\n  zIndex: -1,\n  visibility: 'hidden',\n  pointerEvents: 'none',\n};\nconst styleChild = {\n  position: 'absolute',\n  left: 0,\n  top: 0,\n  transition: '0s',\n};\n\nfunction isAncestor(node: Node, ancestor: Node) {\n  let current = node.parentNode;\n\n  while (current) {\n    if (current === ancestor) {\n      return true;\n    }\n\n    current = current.parentNode;\n  }\n\n  return false;\n}\n\nexport type Props = {\n  onResize?: (ClientRect) => mixed,\n  onPosition?: (ClientRect) => mixed,\n  onReflow?: (ClientRect) => mixed,\n};\n\nclass ResizeObserver extends React.Component<Props> {\n  static displayName = 'ResizeObserver';\n\n  _expandRef: HTMLElement | null = null;\n  _shrinkRef: HTMLElement | null = null;\n  _node: HTMLElement | null = null;\n  _lastWidth: ?number;\n  _lastHeight: ?number;\n  _lastRect: ClientRect;\n  _hasResize: boolean = false;\n\n  componentDidMount() {\n    this._reflow();\n\n    window.addEventListener('scroll', this._handleScroll, true);\n\n    if (this.props.onPosition || this.props.onReflow) {\n      window.addEventListener('resize', this._reflow, true);\n      this._hasResize = true;\n    }\n  }\n\n  componentDidUpdate() {\n    if ((this.props.onPosition || this.props.onReflow) && !this._hasResize) {\n      window.addEventListener('resize', this._reflow, true);\n      this._hasResize = true;\n    } else if (\n      !(this.props.onPosition || this.props.onReflow) &&\n      this._hasResize\n    ) {\n      window.removeEventListener('resize', this._reflow, true);\n      this._hasResize = false;\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this._handleScroll, true);\n\n    if (this._hasResize) {\n      window.removeEventListener('resize', this._reflow, true);\n    }\n  }\n\n  _handleScroll = (event: Event) => {\n    if (\n      (this.props.onPosition || this.props.onReflow || this.props.onResize) &&\n      (this._globalScollTarget(event.target) ||\n        this._refScrollTarget(event.target) ||\n        this._ancestorScollTarget(event.target))\n    ) {\n      this._reflow();\n    }\n  };\n\n  _globalScollTarget = (target: EventTarget) => {\n    return (\n      target instanceof Node &&\n      (this.props.onPosition || this.props.onReflow) &&\n      (target === document ||\n        target === document.documentElement ||\n        target === document.body)\n    );\n  };\n\n  _refScrollTarget = (target: EventTarget) => {\n    if (\n      target instanceof HTMLElement &&\n      (target === this._expandRef || target === this._shrinkRef)\n    ) {\n      const width = target.offsetWidth;\n      const height = target.offsetHeight;\n\n      if (width !== this._lastWidth || height !== this._lastHeight) {\n        this._lastWidth = width;\n        this._lastHeight = height;\n        this._reset(this._expandRef);\n        this._reset(this._shrinkRef);\n        return true;\n      }\n    }\n    return false;\n  };\n\n  _ancestorScollTarget = (target: EventTarget) => {\n    return (\n      target instanceof Node &&\n      (this.props.onPosition || this.props.onReflow) &&\n      this._node &&\n      isAncestor(this._node, target)\n    );\n  };\n\n  _reflow = () => {\n    if (!this._node || !(this._node.parentNode instanceof Element)) return;\n\n    const rect = this._node.parentNode.getBoundingClientRect();\n\n    let sizeChanged = true;\n    let positionChanged = true;\n\n    if (this._lastRect) {\n      sizeChanged =\n        rect.width !== this._lastRect.width ||\n        rect.height !== this._lastRect.height;\n\n      positionChanged =\n        rect.top !== this._lastRect.top || rect.left !== this._lastRect.left;\n    }\n\n    this._lastRect = rect;\n\n    if (sizeChanged && this.props.onResize) {\n      this.props.onResize(rect);\n    }\n\n    if (positionChanged && this.props.onPosition) {\n      this.props.onPosition(rect);\n    }\n\n    if ((sizeChanged || positionChanged) && this.props.onReflow) {\n      this.props.onReflow(rect);\n    }\n  };\n\n  _reset(node: HTMLElement | null) {\n    if (node) {\n      node.scrollLeft = 100000;\n      node.scrollTop = 100000;\n    }\n  }\n\n  _handleRef = (node: HTMLElement | null) => {\n    this._node = node;\n  };\n\n  _handleExpandRef = (node: HTMLElement | null) => {\n    this._reset(node);\n    this._expandRef = node;\n  };\n\n  _handleShrinkRef = (node: HTMLElement | null) => {\n    this._reset(node);\n    this._shrinkRef = node;\n  };\n\n  render() {\n    if (this.props.onResize || this.props.onReflow) {\n      return (\n        <div style={style} ref={this._handleRef}>\n          <div ref={this._handleExpandRef} style={style}>\n            <div style={{...styleChild, width: 100000, height: 100000}} />\n          </div>\n          <div ref={this._handleShrinkRef} style={style}>\n            <div style={{...styleChild, width: '200%', height: '200%'}} />\n          </div>\n        </div>\n      );\n    }\n\n    return <noscript ref={this._handleRef} />;\n  }\n}\n\nexport default ResizeObserver;\n"]},"metadata":{},"sourceType":"script"}